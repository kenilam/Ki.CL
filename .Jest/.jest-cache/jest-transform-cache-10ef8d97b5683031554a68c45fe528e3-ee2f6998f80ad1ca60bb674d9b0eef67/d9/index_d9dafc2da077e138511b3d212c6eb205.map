{"version":3,"sources":["index.tsx"],"names":["view","resources","Router","appear","classNames","children","component","onEnter","onEntered","onEntering","onExit","onExiting","onExited","routeIndex","transitionIn","transitionStyle","Component","pathname","history","location","enterFrame","exitFrame","routes","home","path","name","toLowerCase","substr","replace","onEnterHandler","node","done","document","body","dataset","enteredRoutes","window","cancelAnimationFrame","requestAnimationFrame","onExitHandler","exitedRoutes","split","Instance"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;IAGOA,I,GAAQC,qB,CAARD,I;;AAEP,IAAME,MAA8C,GAAG,SAAjDA,MAAiD,OAgBlD;AAAA,MAdDC,MAcC,QAdDA,MAcC;AAAA,MAbDC,UAaC,QAbDA,UAaC;AAAA,MAZDC,QAYC,QAZDA,QAYC;AAAA,MAXDC,SAWC,QAXDA,SAWC;AAAA,MAVDC,OAUC,QAVDA,OAUC;AAAA,MATDC,SASC,QATDA,SASC;AAAA,MARDC,UAQC,QARDA,UAQC;AAAA,MAPDC,MAOC,QAPDA,MAOC;AAAA,MANDC,SAMC,QANDA,SAMC;AAAA,MALDC,QAKC,QALDA,QAKC;AAAA,MAJDC,UAIC,QAJDA,UAIC;AAAA,MAHDC,YAGC,QAHDA,YAGC;AAAA,MAFDC,eAEC,QAFDA,eAEC;;AACH,MAAMC,SAAqD,GAAG,SAAxDA,SAAwD,QAIzD;AAAA,QAFDX,QAEC,SAFDA,QAEC;AAAA,QAF8BY,QAE9B,SAFSC,OAET,CAFmBC,QAEnB,CAF8BF,QAE9B;AAAA,QAF0CE,QAE1C,SAF0CA,QAE1C;AACH,QAAIC,UAAJ;AACA,QAAIC,SAAJ;AAEA,QAAMC,MAAM,GAAGL,QAAQ,KAAKjB,IAAI,CAACuB,IAAL,CAAUC,IAAvB,GACXxB,IAAI,CAACuB,IAAL,CAAUE,IAAV,CAAeC,WAAf,EADW,GAEXT,QAAQ,CAACU,MAAT,CAAgB,CAAhB,EAAmBC,OAAnB,CAA2B,KAA3B,EAAkC,GAAlC,CAFJ;;AAIA,QAAMC,cAA+B,GAAG,SAAlCA,cAAkC,CAACC,IAAD,EAAOC,IAAP,EAAgB;AACtDC,MAAAA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBC,aAAtB,GAAsCb,MAAtC;AAEAc,MAAAA,MAAM,CAACC,oBAAP,CAA4BjB,UAA5B;;AAEA,UAAI,CAACb,OAAL,EAAc;AACZ;AACD;;AAEDa,MAAAA,UAAU,GAAGgB,MAAM,CAACE,qBAAP,CACX,YAAM;AACJ/B,QAAAA,OAAO,CAACuB,IAAD,EAAOC,IAAP,CAAP;AACD,OAHU,CAAb;AAKD,KAdD;;AAgBA,QAAMQ,aAA6B,GAAG,SAAhCA,aAAgC,CAAAT,IAAI,EAAI;AAC5CE,MAAAA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBM,YAAtB,GAAqClB,MAArC;AAEAc,MAAAA,MAAM,CAACC,oBAAP,CAA4BhB,SAA5B;;AAEA,UAAI,CAACX,MAAL,EAAa;AACX;AACD;;AAEDW,MAAAA,SAAS,GAAGe,MAAM,CAACE,qBAAP,CACV,YAAM;AACJ5B,QAAAA,MAAM,CAACoB,IAAD,CAAN;AACD,OAHS,CAAZ;AAKD,KAdD;;AAgBA,WACE,gCAAC,qBAAD;AACE,MAAA,MAAM,EAAE3B,MADV;AAEE,MAAA,UAAU,EAAEC,UAFd;AAGE,MAAA,SAAS,EAAEE,SAHb;AAIE,MAAA,OAAO,EAAEuB,cAJX;AAKE,MAAA,SAAS,EAAErB,SALb;AAME,MAAA,UAAU,EAAEC,UANd;AAOE,MAAA,MAAM,EAAE8B,aAPV;AAQE,MAAA,SAAS,EAAE5B,SARb;AASE,MAAA,QAAQ,EAAEC,QATZ;AAUE,MAAA,YAAY,EAAEE,YAVhB;AAWE,MAAA,aAAa,EAAEK,QAAQ,CAACF,QAAT,CAAkBwB,KAAlB,CAAwB,GAAxB,EAA6B5B,UAAU,GAAG,CAA1C,KAAgD,GAXjE;AAYE,MAAA,eAAe,EAAEE;AAZnB,OAcE,gCAAC,sBAAD;AAAQ,MAAA,QAAQ,EAAEI;AAAlB,OAA6Bd,QAA7B,CAdF,CADF;AAkBD,GA9DD;;AAgEA,MAAMqC,QAAQ,GAAG,gCAAW1B,SAAX,CAAjB;AAEA,SACE,gCAAC,0BAAD,QACE,gCAAC,QAAD,QAAWX,QAAX,CADF,CADF;AAKD,CAxFD;;eA4FeH,M;;;;;;;;;;;;0BA9FRF,I;0BAEDE,M","sourcesContent":["import resources from '$/resources';\nimport {Transition} from '@/Component';\nimport React from 'react';\nimport {HashRouter as Provider, Redirect, Route, Switch, withRouter} from 'react-router-dom';\nimport * as IRouter from './spec';\n\nconst {view} = resources;\n\nconst Router: React.FunctionComponent<IRouter.Props> = (\n  {\n    appear,\n    classNames,\n    children,\n    component,\n    onEnter,\n    onEntered,\n    onEntering,\n    onExit,\n    onExiting,\n    onExited,\n    routeIndex,\n    transitionIn,\n    transitionStyle\n  }\n) => {\n  const Component: React.FunctionComponent<IRouter.Component> = (\n    {\n      children, history: {location: {pathname}}, location\n    }\n  ) => {\n    let enterFrame: number;\n    let exitFrame: number;\n    \n    const routes = pathname === view.home.path\n      ? view.home.name.toLowerCase()\n      : pathname.substr(1).replace(/\\//g, '.');\n    \n    const onEnterHandler: IRouter.OnEnter = (node, done) => {\n      document.body.dataset.enteredRoutes = routes;\n      \n      window.cancelAnimationFrame(enterFrame);\n      \n      if (!onEnter) {\n        return;\n      }\n      \n      enterFrame = window.requestAnimationFrame(\n        () => {\n          onEnter(node, done);\n        }\n      );\n    };\n    \n    const onExitHandler: IRouter.OnExit = node => {\n      document.body.dataset.exitedRoutes = routes;\n      \n      window.cancelAnimationFrame(exitFrame);\n      \n      if (!onExit) {\n        return;\n      }\n      \n      exitFrame = window.requestAnimationFrame(\n        () => {\n          onExit(node);\n        }\n      );\n    };\n    \n    return (\n      <Transition\n        appear={appear}\n        classNames={classNames}\n        component={component}\n        onEnter={onEnterHandler}\n        onEntered={onEntered}\n        onEntering={onEntering}\n        onExit={onExitHandler}\n        onExiting={onExiting}\n        onExited={onExited}\n        transitionIn={transitionIn}\n        transitionKey={location.pathname.split('/')[routeIndex + 1] || '/'}\n        transitionStyle={transitionStyle}\n      >\n        <Switch location={location}>{children}</Switch>\n      </Transition>\n    );\n  };\n  \n  const Instance = withRouter(Component);\n  \n  return (\n    <Provider>\n      <Instance>{children}</Instance>\n    </Provider>\n  );\n};\n\nexport {Redirect, Route, Switch, Provider, withRouter};\n\nexport default Router;\n"]}