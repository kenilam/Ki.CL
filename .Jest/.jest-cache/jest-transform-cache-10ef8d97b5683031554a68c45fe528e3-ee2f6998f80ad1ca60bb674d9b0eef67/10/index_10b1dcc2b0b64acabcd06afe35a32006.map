{"version":3,"sources":["index.tsx"],"names":["path","resources","view","home","delay","Style","duration","backFill","BackFill","gallery","Gallery","mask","Mask","name","Name","slogan","Slogan","render","previousWindowSizes","height","window","innerHeight","width","innerWidth","Graphic","history","onComplete","isActiveRoute","location","pathname","windowSizesChanged","previousHeight","previousWidth","reset","alpha","update","x","y","resize","tween","gsap","TimelineMax","paused","onReverseComplete","animateIn","restart","animateOut","reverse","Tween","onUpdate","pause","ease","Linear","easeNone","value","Back","easeOut","Expo","easeIn","forEach","sequence","add","kill"],"mappings":"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","sourcesContent":["import resources from '$/resources';\nimport {withRouter} from '@/Component/Router';\nimport WebGL from '@/Component/WebGL';\nimport {CSSUnit} from '@/Helper';\nimport {WindowSizes} from '@/Hook';\nimport React, {useEffect} from 'react';\nimport Gallery from './Gallery';\nimport {BackFill, Mask, Name, Slogan} from './Partial';\nimport * as IWebGL from './spec';\nimport Style from './Style';\nimport Tween, {gsap} from './Tween';\n\nconst {view: {home: {path}}} = resources;\n\nconst delay = CSSUnit(Style.delay) / 1000;\nconst duration = CSSUnit(Style.duration) / 1000;\n\nconst backFill = new BackFill();\nconst gallery = new Gallery();\nconst mask = new Mask();\nconst name = new Name();\nconst slogan = new Slogan();\n\nconst render = (): IWebGL.Render => ([\n  [backFill, gallery, mask, name, slogan]\n]);\n\nlet previousWindowSizes = {\n  height: window.innerHeight,\n  width: window.innerWidth\n};\n\nconst Graphic: React.FunctionComponent<IWebGL.Props> = (\n  {\n    history,\n    onComplete\n  }\n) => {\n  const isActiveRoute = history.location.pathname === path;\n  \n  const {innerHeight: height, innerWidth: width} = window;\n  \n  const windowSizesChanged = () => {\n    const {\n      height: previousHeight,\n      width: previousWidth\n    } = previousWindowSizes;\n    \n    return previousHeight !== height || previousWidth !== width\n  };\n  \n  const reset = () => {\n    if (mask.alpha >= 1) {\n      return;\n    }\n    \n    gallery.update({x: width / 2, y: height / 2});\n    mask.update({x: width / 2, y: height / 2});\n    name.update();\n    slogan.update();\n  };\n  \n  const resize = () => {\n    backFill.update({alpha: 1, height, width});\n    \n    if (!windowSizesChanged() || mask.alpha === 0) {\n      return;\n    }\n    \n    gallery.update({alpha: 1, height: height, width: width});\n    mask.update({alpha: 1, height: height, width: width});\n    name.update({alpha: 1, height, width, y: -name.height});\n    slogan.update({alpha: 1, height, width, y: -slogan.height});\n    \n    previousWindowSizes = {height, width};\n  };\n  \n  const tween = new gsap.TimelineMax({\n    paused: true,\n    onComplete,\n    onReverseComplete: onComplete\n  });\n  \n  const animateIn = () => {\n    if (mask.alpha >= 1) {\n      return;\n    }\n    \n    tween.restart(true);\n  };\n  \n  const animateOut = () => {\n    if (isActiveRoute) {\n      return;\n    }\n    \n    tween.reverse(0);\n  };\n  \n  [\n    new Tween({\n      duration: 0,\n      onUpdate() {\n        gallery.update({height, width});\n        mask.update({x: width / 2, y: height / 2});\n        name.update();\n        slogan.update();\n      },\n      pause: false\n    }),\n    new Tween({\n      delay: duration * 0.1,\n      duration: duration * 0.1,\n      ease: gsap.Linear.easeNone,\n      onUpdate({value: alpha}) {\n        mask.update({\n          alpha,\n          height: height * alpha,\n          width: width / 20 * alpha,\n          x: width / 2 - width / 40 * alpha,\n          y: height / 2 - height / 2 * alpha\n        });\n      },\n      pause: false\n    }),\n    new Tween({\n      duration: duration * 0.2,\n      ease: gsap.Back.easeOut,\n      onUpdate({value: alpha}) {\n        mask.update({\n          alpha: 1,\n          height: height,\n          width: width * alpha,\n          x: width / 2 - width / 2 * alpha\n        });\n      },\n      pause: false\n    }),\n    new Tween({\n      duration: duration * 0.4,\n      ease: gsap.Back.easeOut,\n      onUpdate({value: alpha}) {\n        slogan.update({alpha, height, width, y: -slogan.height});\n      },\n      pause: false\n    }),\n    new Tween({\n      duration: duration * 0.3,\n      ease: gsap.Expo.easeIn,\n      onUpdate({value: alpha}) {\n        name.update({alpha, height, width, y: -name.height});\n      },\n      pause: false\n    }),\n    new Tween({\n      duration: duration * 0.3,\n      ease: gsap.Expo.easeIn,\n      onUpdate({value: alpha}) {\n        gallery.update({alpha, height, width});\n      },\n      pause: false\n    })\n  ].forEach(\n    ({sequence}) => {\n      tween.add(sequence);\n    }\n  );\n  \n  WindowSizes();\n  \n  useEffect(() => {\n    resize();\n    animateIn();\n    animateOut();\n    \n    return () => {\n      reset();\n      tween.kill();\n    };\n  });\n  \n  tween.delay(delay);\n  \n  return (\n    <WebGL className={Style.default} height={height} width={width} render={render} />\n  )\n};\n\nbackFill.mask = mask;\n\nexport default withRouter(Graphic);\n"]}