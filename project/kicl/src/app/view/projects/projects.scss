@import '_import';

[data-route^='projects'] {
	background-image: none;
	
	.globalHeader {
		&:not(.isScrolled) {
			padding: rem($gutter);

			@include mobile () {
				padding: 0;
			}

			nav {
				@include largemobile () {
					@include set-font-size(1.2);
				}

				@include mobile () {
					@include set-font-size(1.4);
					@include backdrop-filter(blur(5px));
				}

				ul {
					margin-right: rem($gutter);


					@include mobile () {
						margin-right: 0;
					}
				}
			}
		}

		[href='#!/projects'] {
			@include through();
		}
	}
}

main {
	&[data-route^=projects] {
		@include display(flex);
		@include flex-direction(column);

		overflow-x: hidden;
		padding-top: 0;

		nav {
			@include set-transition(height);
			@include transition-duration($fastest);

			@include order(1);

			@include box-shadow($shadow-bottom);

			overflow: hidden;
			position: relative;
			width: 100%;

			.background {
				@include set-transition(background-color, height, opacity, transform, width);

				@include transform(translate3d(-50%, -50%, 0));

				background-color: $black;
				background-image: url('#{$image_path}pattern/half.tone.png');
				background-position: center;
				background-repeat: repeat;
				border-radius: rem(3);
				height: calc(100% - #{rem($gutter * 2)});
				left: 50%;
				position: absolute;
				top: 50%;
				width: calc(100% - #{rem($gutter * 2)});
				z-index: 1;

				@include mobile () {
					border-radius: 0;
					height: 100%;
					width: 100%;
				}
			}

			ul {
				position: relative;
				z-index: 2;
			}

			figure {
				@include display(flex);
				@include flex-direction(column);
				@include align-items(center);
				@include justify-content(center);

				height: 100%;
			}

			figcaption {
				@include set-transition(opacity);

				margin-top: rem($gutter);
				text-align: center;

				@include mobile () {
					@include hidden();
				}

				@include largedesktop () {
					@include transform(translate3d(0, 10%, 0));
				}
			}

			a {
				@include circle(grid-size(3));

				@include set-transition(border, transform);

				background-position: center;
				background-repeat: no-repeat;
				background-size: cover;
				border: 0 solid $white;

				@include mobile () {
					@include transform(scale(.8));
				}

				@include largedesktop () {
					@include transform(scale(1.2));
				}
			}

			img {
				@include set-transition(height, left, transform);
				@include transition-duration($slowest);

				height: 100%;
				left: 50%;
				position: absolute;
				transform: translate3d(-50%, -50%, 0);
				top: 50%;
			}

			li {
				position: relative;
				z-index: 1;

				&:hover {
					img {
						height: 120%;
						left: 60%;
						transform: translate3d(-60%, -60%, 0);
						top: 60%;
					}
				}

				&.isCurrent {
					z-index: 2;

					a {
						@include box-shadow($shadow-bottom);

						border-width: rem($space);
					}

					img {
						@include unset-transition();
					}

					@include mobile () {
						border-width: rem($space) * (1 / .8);
					}
				}

				&:not(.isCurrent) {
					cursor: pointer;
					
					a {
						@include transform(scale(.7));

						border-width: rem($gutter * (1 / .7));

						@include largemobile () {
							@include transform(scale(.7));

							border-width: rem($gutter * (1 / .7));
						}

						@include mobile () {
							@include transform(scale(.3));

							border-width: rem($gutter * (1 / 1.3));
						}
					}

					figcaption {
						@include through();
						
						@include opacity(0);
					}
				}
			}

			.title {
				font-weight: $thicker_font_weight;
			}

			&.isSwiping {
				li {
					&.isCurrent {
						a {
							@include box-shadow(none);

							@include transform(scale(.7));

							border-width: rem($gutter * (1 / .7));

							@include mobile () {
								@include transform(scale(.3));

								border-width: rem($gutter * (1 / 1.3));
							}
						}
					}
				}

				figcaption {
					@include opacity(0);
				}
			}
		}

		[ui-view="project"] {
			@include order(2);
		}

		&.ng-animate {
			nav {
				.background {
					@include set-transition(transform);
				}

				ul {
					@include set-transition(opacity);
				}
			}
		}

		&.ng-enter {
			nav {
				.background,
				ul {
					@include transition-delay($fast);
				}
				
				.background {
					@include transform(translate3d(-50%, -50%, 0) scale(1.3));
				}

				ul {
					@include transition-delay($slow);

					@include opacity(0);
				}
			}

			&.ng-enter-active {
				nav {
					.background {
						@include transform(translate3d(-50%, -50%, 0) scale(1));
					}

					ul {
						@include transition-delay($slow);

						@include opacity(1);
					}
				}
			}
		}

		&.ng-leave {
			&.ng-leave-active {
				nav {
					.background {
						background-color: transparent;
					}
				}
			}
		}
	}
}